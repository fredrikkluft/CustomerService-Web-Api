<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>


    <script src="Scripts/jquery-3.3.1.min.js"></script>
    <link href="Content/bootstrap.css" rel="stylesheet" />
    <script src="../Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="Scripts/bootstrap.bundle.min.js"></script>
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <link href="Content/Simple-sidebar.css" rel="stylesheet" />
</head>

<body>




    <div id="wrapper">



        <!-- Sidebar -->
        <div class="float-md-right" id="sidebar-wrapper">

            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                        Kundeservice
                    </a>
                </li>
                <li>
                    <a href="#">Ofte stilte spørsmål</a>
                </li>
                <li>
                    <a href="#sendquestion">Kategorier</a>
                </li>
                <li>
                    <a href="#sendquestion">Send inn spørsmål</a>
                </li>



            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- Page Content -->
        <!--<a href="#page-content-wrapper" class="btn btn-primary" id="fixedbutton">Til toppen</a>-->

        <a href="#menu-toggle" class="btn btn-secondary" id="menu-toggle">Meny</a>


        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <div class="center" id="sendquestion">
                        <table class="table table-bordered" style="border:1px solid black">

                            <tr><td class="text-center">Epost:</td><td><input type="text" id="txtEmail" /></td></tr>

                            <tr><td>Spørsmål: </td> <td><textarea id="newquestion" rows="4" cols="50"></textarea></td></tr>

                        </table>
                        <div class="text-center">
                            <button onclick="Savequestion()" class="btn btn-primary">Send inn spørsmål</button>
                        </div>

                    </div>
                </div>
                <div class="col-sm">
                    <div class="center">
                        
                    </div>
                </div>
                <div class="col-sm">
                    One of three columns
                </div>
            </div>
        </div>

            

                <!--<button onclick="LeggTilPerson()" class="btn btn-primary">Legg til person</button>
                <button onclick="HentAllePersoner()" class="btn btn-primary">Vis alle</button><br /><br />
                <button onclick="HentPerson()" class="btn btn-primary">Vis Person</button> Person ID <input type="text" id="txtPersId" />
                <button onclick="SlettPerson()" class="btn btn-danger">Slett Person</button> Person ID <input type="text" id="txtSlettId" />-->



           










        </div>

        <!-- /#page-content-wrapper -->
        <!-- /#wrapper -->
        <script>
                $("#menu-toggle").click(function (e) {
                    e.preventDefault();
                    $("#wrapper").toggleClass("toggled");
                });
        </script>

        <script type="text/javascript">
                



                function Savequestion() {
                    //var newQuestion = $('#newquestion').val();
                    var newQuestion = { Question: $('#newquestion').val()};

                    $.ajax({
                        url: '/api/Api/',
                        type: 'POST',
                        data: JSON.stringify(newQuestion),
                        contentType: "application/json;charset=utf-8",
                        success: function (data) {

                            //returner innsendt spørsmål
                            GetAllQuestions(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }










                function HentAllePersoner() {
                    $.ajax({
                        url: '/api/Person',
                        type: 'GET',
                        success: function (data) {
                            VisAlle(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

                /*  function VisAlle(personer) {
                      var strResult = "<table class='table table-boarded'><tr><th>Id</th><th>Fornavn</th><th>Etternavn</th><th>Adresse</th><th>Postnr</th><th>Poststed</th><th>Telefonnr</th><th>Epost</th></tr>";
                      $.each(personer, function (i, p) {
                          strResult += "<tr><td>" + p.Id+ "</td><td> " + p.Fornavn + "</td><td>"+p.Etternavn + "</td><td>";
                          strResult += p.Adresse + "</td><td>" + p.Postnr + "</td><td>" + p.Poststed + "</td><td>";
                          strResult += p.Telefonnr + "</td><td>" + p.Epost + "</td></tr>";
                      });
                      strResult += "</table>";
                      $("#divResult").html(strResult);
                  }*/

                function getAQuestion() {
                    var id = $('#txtPersId').val();
                    $.ajax({
                        url: '/api/Api/' + id,
                        type: 'GET',
                        success: function (data) {
                            VisEn(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

                function VisEn(person) {
                    var p = person;
                    var strResult = "<table class='table table-bordered'><th>Id</th><th>Fornavn</th><th>Etternavn</th><th>Adresse</th><th>Postnr</th><th>Poststed</th><th>Telefonnr</th><th>Epost</th>";
                    strResult += "<tr><td>" + p.Id + "</td><td> " + p.Fornavn + "</td><td>" + p.Etternavn + "</td><td>";
                    strResult += p.Adresse + "</td><td>" + p.Postnr + "</td><td>" + p.Poststed + "</td><td>";
                    strResult += p.Telefonnr + "</td><td>" + p.Epost + "</td></tr>";
                    strResult += "</table>";
                    $("#divResult").html(strResult);
                }



                function SlettPerson() {
                    var id = $('#txtSlettId').val()

                    $.ajax({
                        url: '/api/Person/' + id,
                        type: 'DELETE',
                        contentType: "application/json;charset=utf-8",
                        success: function (data) {
                            VisAlle(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

        </script>





</body>
</html>