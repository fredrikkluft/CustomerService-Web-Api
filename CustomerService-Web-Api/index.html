<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>


    <script src="Scripts/jquery-3.3.1.min.js"></script>
    <link href="Content/bootstrap.css" rel="stylesheet" />
    <script src="../Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="Scripts/bootstrap.bundle.min.js"></script>
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <link href="Content/Simple-sidebar.css" rel="stylesheet" />
</head>

<body>


    

    <div id="wrapper" class="toggled">



        <!-- Sidebar -->
        <div class="float-md-right" id="sidebar-wrapper">

            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#">
                        Kundeservice Web-Api
                    </a>
                </li>
                <li>
                    <a href="#">Ofte stilte spørsmål</a>
                </li>
                <li>
                    <a href="#sendquestion">Kategorier</a>
                </li>
                <li>
                    <a href="#sendquestion">Send inn spørsmål</a>
                </li>



            </ul>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- Page Content -->
        <!--<a href="#page-content-wrapper" class="btn btn-primary" id="fixedbutton">Til toppen</a>-->

        <a href="#menu-toggle" class="btn btn-secondary" id="menu-toggle">Meny</a>
       

        <div id="page-content-wrapper">

            <div class="row">
                <div class="col-4">
                    <div class="list-group" id="list-tab" role="tablist">

                        <h1 class="display-4 text-center">Velg Kategori</h1>

                        <button type="button" class="btn btn-dark" onclick="GetFrequentlyaskedquestions()">

                            <h3 class="title">Ofte stilte spørsmål</h3>
                            <!--<img src="https://png.icons8.com/metro/1600/purchase-order.png" height="128" width="128" />-->
                            <p>Her finner du ofte stilte spørsmål</p>

                        </button>

                        <br />

                        <button type="button" class="btn btn-dark" onclick="setCategoryOrder()">

                            <h3 class="title">Ordre</h3>
                            <!--<img src="https://png.icons8.com/metro/1600/purchase-order.png" height="128" width="128" />-->
                            <p>Her finne du svar på spørsmål relatert til dine ordre.</p>

                        </button>

                        <br />

                        <button type="button" class="btn btn-dark" onclick="setCategoryMovie()">

                            <h3 class="title">Filmer</h3>
                            <!--<img src="https://cdn1.iconfinder.com/data/icons/shoping-cart/84/ShoppingCart22-512.png" height="128" width="128" />-->
                            <p>Kjøp av film og angrerett.</p>

                        </button>

                        <br />

                        <button type="button" class="btn btn-dark" onclick="setCategoryAccount()">

                            <h3 class="title">Konto</h3>
                            <!--<img src="https://image.flaticon.com/icons/svg/61/61205.svg" height="128" width="128" />-->
                            <p>Konto og kunderelaterte spørsmål.</p>

                        </button>

                        <div class="text-center"> Finner du ikke det du leter etter? Trykk her</div>

                    </div>
                </div>
                <div class="col-8">
                    <div class="tab-content" id="nav-tabContent">
                        <br />
                        <br />
                        <br />

                        <div class="" id="divResult"></div>




                    </div>
                </div>
            </div>

            <div class="row">

                

            </div>

                <div class="container">
                    <div class="row">
                        <div class="col">

                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <br />
                            <div class="border" id="sendquestion">
                                <h1 class="display-4">Send inn spørsmål</h1>
                                <table class="table table-bordered" style="border:1px solid black">

                                    <tr><td>Epost:</td><td><input style="width:370px;" type="text" id="txtEmail" /></td></tr>

                                    <tr><td>Spørsmål: </td> <td><textarea id="newquestion" rows="4" cols="50"></textarea></td></tr>


                                </table>
                                <div class="text-center">
                                    <button onclick="Savequestion()" class="btn btn-primary">Send inn spørsmål</button>


                                </div>

                            </div>







                        </div>
                    </div>




                </div>
                <div class="col">

                    
                    <p>Her vil du finne ofte stilte spørsmål. Finne du ikke svaret du er ute etter, vennligst ta kontakt ved bruk av innsendings skjema nederst på siden.</p>





                    <br />
                    <br />





                </div>
           

        </div>

            <!-- /2 kolonner side by side -->

            <div class="container">
                <div class="row">

                    <div class="col">

                        
                    </div>



                    <div class="col">

                        <div class="row">


                        </div>
                        <div class="row">




                            <div class="container-fluid">

                               


                            </div>
                        </div>
                    </div>


                </div>
            </div>













            <!--stemme med tommel og ahref link til skjema?-->

            

            <!--<button onclick="LeggTilPerson()" class="btn btn-primary">Legg til person</button>
    <button onclick="HentAllePersoner()" class="btn btn-primary">Vis alle</button><br /><br />
    <button onclick="HentPerson()" class="btn btn-primary">Vis Person</button> Person ID <input type="text" id="txtPersId" />
    <button onclick="SlettPerson()" class="btn btn-danger">Slett Person</button> Person ID <input type="text" id="txtSlettId" />-->



        </div> <!--Denne avslutter den grå bakgrunnen-->

        

        

        




            </div>

            <!-- /#page-content-wrapper -->
            <!-- /#wrapper -->
            <script>
                $("#menu-toggle").click(function (e) {
                    e.preventDefault();
                    $("#wrapper").toggleClass("toggled");
                });
            </script>

            <script type="text/javascript">
                var category = "";

                //$(function () {
                //    GetAllQuestions();
                //});

                function setCategoryMovie() {
                    category = "Movies";
                    GetAllQuestions();
                }

                function setCategoryOrder() {
                    category = "Order";
                    GetAllQuestions();
                }

                function setCategoryAccount() {
                    category = "Account";
                    GetAllQuestions();
                }

                function GetAllQuestions() {
                    $.ajax({
                        url: '/api/Api',
                        type: 'GET',
                        success: function (data) {
                            GetAll(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

                function GetAll(QandAs) {
                    var strResult = "<table class='table'>";


                    $.each(QandAs, function (i, p) {
                        console.log(p.Category);
                        if (p.Category === category) {
                            strResult += "<tr><td><button class='btn btn-secondary dropdown-toggle' type='button' id='dropdownMenuButton' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false' style='width:100%'>"
                                + p.Question + p.Category + "<div class='dropdown-menu' style='width:100%; height:80px; background:lightgrey'; aria-labelledby='dropdownMenuButton'><a class='dropdown - item' style='width:100%' >" + p.Answer + "</a></div></td></tr>";
                        }
                        });

                    strResult += "</button></table>";
                    $("#divResult").html(strResult);
                }

                



                function Savequestion() {
                    //var newQuestion = $('#newquestion').val();
                    var newQuestion = { Question: $('#newquestion').val()};

                    $.ajax({
                        url: '/api/Api/',
                        type: 'POST',
                        data: JSON.stringify(newQuestion),
                        contentType: "application/json;charset=utf-8",
                        success: function (data) {

                            //returner innsendt spørsmål
                            GetAllQuestions(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }










                function HentAllePersoner() {
                    $.ajax({
                        url: '/api/Person',
                        type: 'GET',
                        success: function (data) {
                            VisAlle(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

                /*  function VisAlle(personer) {
                      var strResult = "<table class='table table-boarded'><tr><th>Id</th><th>Fornavn</th><th>Etternavn</th><th>Adresse</th><th>Postnr</th><th>Poststed</th><th>Telefonnr</th><th>Epost</th></tr>";
                      $.each(personer, function (i, p) {
                          strResult += "<tr><td>" + p.Id+ "</td><td> " + p.Fornavn + "</td><td>"+p.Etternavn + "</td><td>";
                          strResult += p.Adresse + "</td><td>" + p.Postnr + "</td><td>" + p.Poststed + "</td><td>";
                          strResult += p.Telefonnr + "</td><td>" + p.Epost + "</td></tr>";
                      });
                      strResult += "</table>";
                      $("#divResult").html(strResult);
                  }*/

                function getAQuestion() {
                    var id = $('#txtPersId').val();
                    $.ajax({
                        url: '/api/Api/' + id,
                        type: 'GET',
                        success: function (data) {
                            VisEn(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

                function VisEn(person) {
                    var p = person;
                    var strResult = "<table class='table table-bordered'><th>Id</th><th>Fornavn</th><th>Etternavn</th><th>Adresse</th><th>Postnr</th><th>Poststed</th><th>Telefonnr</th><th>Epost</th>";
                    strResult += "<tr><td>" + p.Id + "</td><td> " + p.Fornavn + "</td><td>" + p.Etternavn + "</td><td>";
                    strResult += p.Adresse + "</td><td>" + p.Postnr + "</td><td>" + p.Poststed + "</td><td>";
                    strResult += p.Telefonnr + "</td><td>" + p.Epost + "</td></tr>";
                    strResult += "</table>";
                    $("#divResult").html(strResult);
                }



                function SlettPerson() {
                    var id = $('#txtSlettId').val()

                    $.ajax({
                        url: '/api/Person/' + id,
                        type: 'DELETE',
                        contentType: "application/json;charset=utf-8",
                        success: function (data) {
                            VisAlle(data);
                        },
                        error: function (x, y, z) {
                            alert(x + '\n' + y + '\n' + z);
                        }
                    });
                }

            </script>





</body>
</html>